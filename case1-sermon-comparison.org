* 분석 사례 1: (개신교) 설교자에 따른 어휘 체계 비교

가정 및 분석 시나리오

 - 설교자마다 가치 체계가 다를 것이다.
 - 설교자의 가치 체계는, 사용하는 어휘를 통해 드러날 것이다.
 - word2vec 기법을 사용하여 어휘에 대한 벡터 공간을 구하여, 의미가 비슷한 단어들끼리 가까이 위치하도록 한다.
 - 그것을 t-SNE를 통해 2차원 평면으로 축소하고, scatter plot으로 시각화한다.


** 데이터 개요

분석 대상으로 삼을 (텍스트) 데이터는 디지털화 되어있어야 함. (종이, 음성, 영상 등으로부터 텍스트를 추출하는 것은 비용이 많이 들고 어려움.)

설교문을 인터넷 상에 텍스트로 게시해놓은 곳들을 인터넷 상에서 검색함. 텍스트 데이터를 수집하는 것부터가 관건임.


원고 있음

 - 대한예수교장로회 평안교회 ([[http://pyeong-an.com/설교-말씀-원고/][link]])
 - 기독교대한감리회 북수원교회 ([[http://buksuwon.org/main/sub.html?pageCode=68)][link]])
 - 대한예수교장로회 서문로교회 ([[http://www.e-smr.org/bbs/board.html?code=pastor_02&inc=0)][link]])
 - 대한예수교장로회 시화충현교회 ([[http://www.scch1.kr/main/sub.html?pageCode=8][link]])
 - 소망교회: 설교 텍스트 있음. 게시판 구조 약간 다름 (팝업)
 - 높은뜻 연합선교회: 설교 텍스트 있음. 게시판 구조 약간 다름 (연도별 게시판 분리)

원고 없음

 - 백주년 기념교회: 동영상, MP3만 있고 설교 텍스트 원고는 없음.
 - 삼일교회: 동영상, MP3만 있고 설교 텍스트 원고는 없음.
 - 분당우리교회: 동영상, MP3만 있고 설교 텍스트 원고는 없음.
 - 선한목자교회: 홈페이지 안열림.
 - 지구촌교회: 동영상, MP3만 있고 설교 텍스트 원고는 없음.
 - 온누리교회: 동영상, MP3만 있고 설교 텍스트 원고는 없음.
 - 산정현교회: 동영상, MP3만 있고 설교 텍스트 원고는 없음.
 - 영락교회: 동영상, MP3만 있고 설교도 이미지는 있는데 텍스트 원고는 없음.
 - 임마누엘교회: 동영상만 있고 설교 텍스트 원고는 없음.
 - 동안교회: 동영상, MP3만 있고 설교 텍스트 원고는 없음.
 - 주안장로교회: 동영상만 있고 설교 텍스트 원고는 없음.

많은 교회들이 설교 동영상, MP3만 제공하고 텍스트 원고를 제공하지 않고 있음.


** 데이터 수집

각 데이터를 수집하기 위해, 웹 문서 수집기를 작성하여 자동으로 웹 문서를 수집.


** 전처리

수집된 문서에 대해서

 - 날짜별로 나뉘어진 문서를 설교자별로 하나의 문서가 되도록 통합
 - 한 행에 한 문장이 들어가도록 행 구분
 - 문장부호(따옴표, 쉼표, 느낌표, 물음표 등) 제거
 - 각 문장을 형태소 단위로 변환하고 품사를 부착
 - 각 문장에서 파악된 품사들 중, 조사, 어미, 접사를 제거하고 명사, 동사, 부사, 형용사 등만 남김

전처리 결과를 눈으로 확인하면서 전처리를 보완

 - 개신교 특화 어휘를 형태소 분석기 사용자 사전에 추가


** 텍스트 마이닝 기법 적용

 - 각 설교자 데이터에 등장하는 단어들을 Word2vec을 사용하여 단어 공간 벡터로 구성
 - t-SNE를 사용하여 2차원으로 차원 축소
 - 2차원 평면에 시각화


** 기초 통계

문서(설교문) 수

 - 평안교회: 설교문 160건 (약 3년간)
 - 북수원교회: 설교문 175건 (약 3년간)


분석에 사용된 문장 수:

 - 평안교회: 18,174 문장
 - 북수원교회: 39,466 문장


#+BEGIN_SRC ipython :session :results raw output :exports both
  import os
  from nltk import Text

  def get_text(dataset):
      with open(os.path.join('outputs', 'sermon-{}-corpus.txt'.format(dataset))) as fin:
          for line in fin:
              words = line.split()
              for word in words:
                  yield word

  corpus_pyeongan = Text(get_text('pyeongan'))
  print(len(set(corpus_pyeongan.tokens)))
  corpus_buksuwon = Text(get_text('buksuwon'))
  print(len(set(corpus_buksuwon.tokens)))
#+END_SRC

#+RESULTS:
13145
18863


분석에 사용된 unique한 단어 수:
 - 평안교회: 13,145 단어
 - 북수원교회: 18,863 단어


#+BEGIN_SRC ipython :session :results raw :exports both :ipyfile assets/pyeongan-words-freq-dist.png
  %matplotlib inline
  import matplotlib
  import matplotlib.pyplot as plt
  import matplotlib.font_manager as fm

  matplotlib.rc('font', family='Noto Sans CJK KR')

  plt.figure(figsize=(10, 5))
  corpus_pyeongan.plot(20)
#+END_SRC

#+RESULTS:
# Out[18]:
[[file:assets/pyeongan-words-freq-dist.png]]

#+BEGIN_SRC ipython :session :results raw :exports both :ipyfile assets/buksuwon-words-freq-dist.png
  plt.figure(figsize=(10, 5))
  corpus_buksuwon.plot(20)
#+END_SRC

#+RESULTS:
# Out[19]:
[[file:assets/buksuwon-words-freq-dist.png]]

** 1차 시각화 결과

북수원교회

[[./assets/buksuwon.png]]

평안교회

[[./assets/pyeongan.png]]

 - 북수원교회: 18,863 단어
 - 평안교회: 13,145 단어

단어가 너무 많아서 식별이 어려움

2글자 이상인 단어만 시각화하기로 함


** 2차 시각화 결과

북수원교회

[[./assets/buksuwon-cleansed.png]]

평안교회

[[./assets/pyeongan-cleansed.png]]

단어가 다소 줄어들었으나, 여전히 구조를 식별하거나 의미를 도출하기에는 단어가 너무 많음.

대상 교회 모두에 포함되어 있는 단어들만 추출하여 시각화하기로 함


** 3차 시각화 결과

북수원교회

[[./assets/buksuwon-common.png]]

평안교회

[[./assets/pyeongan-common.png]]

 - 공통 단어: 444 단어
 - 시각화된 단어: 287 단어


** 유사어 관계

Word2vec은 단어를 벡터 평면 위에 나타냄. 그래서 벡터간의 관계로 벡터 평면상의 유사어를 찾을 수 있음.

(이 결과는 어떤 텍스트를 가지고 분석하는지, 전처리를 어떻게 하는지, 형태소 분석을 어떻게 하는지 등, 분석 설계에 따라 많이 달라질 수 있고, 본 발표에서는 결과의 엄밀성을 추구하기보다는 간략한 예시를 들고자 하였음.)


*** 목사

#+BEGIN_QUOTE
{'negative': [], 'topn': 10, 'positive': ['목사/N']}
pyeongan [('성도들/N', 0.9149564504623413), ('우리교회/N', 0.9040133953094482), ('교회/N', 0.8874156475067139), ('참/M', 0.872040867805481), ('신앙생활/N', 0.8715347051620483), ('서로/M', 0.8603247404098511), ('맞/P', 0.8561086654663086), ('성도님/N', 0.8541781902313232), ('이런/M', 0.8468502759933472), ('감동/N', 0.8445517420768738)]
buksuwon [('목사님/N', 0.7882688045501709), ('설교/N', 0.7712228894233704), ('첫째/N', 0.7670207619667053), ('교인/N', 0.7485924959182739), ('결혼/N', 0.7398300170898438), ('요즘/M', 0.7104164361953735), ('존경/N', 0.7100589871406555), ('교제/N', 0.6975115537643433), ('미국/N', 0.6933127045631409), ('대통령/N', 0.6916025876998901)]
#+END_QUOTE

평안교회

|----------+--------------------|
| 유사어   |             유사도 |
|----------+--------------------|
| 성도들   | 0.9149564504623413 |
| 우리교회 | 0.9040133953094482 |
| 교회     | 0.8874156475067139 |
| 참       | 0.8720408678054810 |
| 신앙생활 | 0.8715347051620483 |
| 서로     | 0.8603247404098511 |
| 맞       | 0.8561086654663086 |
| 성도님   | 0.8541781902313232 |
| 이런     | 0.8468502759933472 |
| 감동     | 0.8445517420768738 |
|----------+--------------------|


북수원교회

|--------+--------------------|
| 유사어 |             유사도 |
|--------+--------------------|
| 목사님 | 0.7882688045501709 |
| 설교   | 0.7712228894233704 |
| 첫째   | 0.7670207619667053 |
| 교인   | 0.7485924959182739 |
| 결혼   | 0.7398300170898438 |
| 요즘   | 0.7104164361953735 |
| 존경   | 0.7100589871406555 |
| 교제   | 0.6975115537643433 |
| 미국   | 0.6933127045631409 |
| 대통령 | 0.6916025876998901 |
|--------+--------------------|


*** 부모

#+BEGIN_QUOTE
{'negative': [], 'topn': 10, 'positive': ['부모/N']}
pyeongan [('자식/N', 0.9306495785713196), ('형제/N', 0.7938449382781982), ('여기/P', 0.788515031337738), ('부모님/N', 0.7854584455490112), ('여기/N', 0.7827234864234924), ('귀하/P', 0.7680160403251648), ('첫째/N', 0.7596476674079895), ('이웃/N', 0.7270892858505249), ('남편/N', 0.7105952501296997), ('가족/N', 0.7078830003738403)]
buksuwon [('상처/N', 0.7811678647994995), ('주장/N', 0.7537643313407898), ('비난/N', 0.7533712983131409), ('반대/N', 0.7386428713798523), ('감정/N', 0.7362396717071533), ('아무런/M', 0.7236377000808716), ('표현/N', 0.7183949947357178), ('가지/P', 0.7179199457168579), ('생기/P', 0.7164723873138428), ('경우/N', 0.711770236492157)]
#+END_QUOTE

평안교회

|--------+--------------------|
| 유사어 |             유사도 |
|--------+--------------------|
| 자식   | 0.9306495785713196 |
| 형제   | 0.7938449382781982 |
| 여기   | 0.7885150313377380 |
| 부모님 | 0.7854584455490112 |
| 여기   | 0.7827234864234924 |
| 귀하   | 0.7680160403251648 |
| 첫째   | 0.7596476674079895 |
| 이웃   | 0.7270892858505249 |
| 남편   | 0.7105952501296997 |
| 가족   | 0.7078830003738403 |
|--------+--------------------|

북수원교회

|--------+--------------------|
| 유사어 |             유사도 |
|--------+--------------------|
| 상처   | 0.7811678647994995 |
| 주장   | 0.7537643313407898 |
| 비난   | 0.7533712983131409 |
| 반대   | 0.7386428713798523 |
| 감정   | 0.7362396717071533 |
| 아무런 | 0.7236377000808716 |
| 표현   | 0.7183949947357178 |
| 가지   | 0.7179199457168579 |
| 생기   | 0.7164723873138428 |
| 경우   | 0.7117702364921570 |
|--------+--------------------|


*** 아내:여자 = 남편:?

#+BEGIN_QUOTE
{'negative': ['남편/N'], 'topn': 10, 'positive': ['아내/N', '여자/N']}
buksuwon [('선생님/N', 0.7254754900932312), ('그러자/M', 0.721248209476471), ('둘/N', 0.7021447420120239), ('동네/N', 0.6976401805877686), ('여인/N', 0.6821793913841248), ('끌/P', 0.6719760894775391), ('차/N', 0.6709184050559998), ('뒤/N', 0.6671269536018372), ('갑자기/M', 0.6542689800262451), ('옷/N', 0.6486425399780273)]
pyeongan [('남자/N', 0.9578892588615417), ('모으/P', 0.824720025062561), ('재산/N', 0.7979883551597595), ('자기/N', 0.7710286974906921), ('묻/P', 0.7645692825317383), ('그러나/M', 0.7488867044448853), ('적/N', 0.7457890510559082), ('집/N', 0.7363495826721191), ('결국/M', 0.7339403629302979), ('어리/P', 0.7274197936058044)]
#+END_QUOTE

북수원교회

|--------+--------------------|
| 유사어 |             유사도 |
|--------+--------------------|
| 선생님 | 0.7254754900932312 |
| 그러자 | 0.7212482094764710 |
| 둘     | 0.7021447420120239 |
| 동네   | 0.6976401805877686 |
| 여인   | 0.6821793913841248 |
| 끌     | 0.6719760894775391 |
| 차     | 0.6709184050559998 |
| 뒤     | 0.6671269536018372 |
| 갑자기 | 0.6542689800262451 |
| 옷     | 0.6486425399780273 |
|--------+--------------------|

평안교회

|--------+--------------------|
| 유사어 |             유사도 |
|--------+--------------------|
| 남자   | 0.9578892588615417 |
| 모으   | 0.8247200250625610 |
| 재산   | 0.7979883551597595 |
| 자기   | 0.7710286974906921 |
| 묻/P   | 0.7645692825317383 |
| 그러나 | 0.7488867044448853 |
| 적     | 0.7457890510559082 |
| 집     | 0.7363495826721191 |
| 결국   | 0.7339403629302979 |
| 어리   | 0.7274197936058044 |
|--------+--------------------|


*** 하나님:예수님 = 아버지:?

#+BEGIN_QUOTE
{'negative': ['아버지/N'], 'topn': 10, 'positive': ['하나님/N', '예수님/N']}
buksuwon [('현재/N', 0.5352447032928467), ('성령님/N', 0.5337713956832886), ('부활/N', 0.5106089115142822), ('승리/N', 0.4967706501483917), ('과거/N', 0.49019941687583923), ('친히/M', 0.4865853786468506), ('축원/N', 0.47945135831832886), ('위해/N', 0.47814762592315674), ('위대한/N', 0.47759485244750977), ('확신/N', 0.47657281160354614)]
pyeongan [('승리/N', 0.6806221008300781), ('제자들/N', 0.6795159578323364), ('분명/N', 0.6775883436203003), ('복음/N', 0.6616663932800293), ('깨닫/P', 0.6593103408813477), ('변화/N', 0.6535580158233643), ('통하/P', 0.6533569097518921), ('사건/N', 0.6463179588317871), ('부활/N', 0.64182049036026), ('최고/N', 0.6403045058250427)]
#+END_QUOTE

북수원교회

|--------+---------------------|
| 유사어 |              유사도 |
|--------+---------------------|
| 현재   | 0.53524470329284670 |
| 성령님 | 0.53377139568328860 |
| 부활   | 0.51060891151428220 |
| 승리   | 0.49677065014839170 |
| 과거   | 0.49019941687583923 |
| 친히   | 0.48658537864685060 |
| 축원   | 0.47945135831832886 |
| 위해   | 0.47814762592315674 |
| 위대한 | 0.47759485244750977 |
| 확신   | 0.47657281160354614 |
|--------+---------------------|

평안교회

|--------+--------------------|
| 유사어 |             유사도 |
|--------+--------------------|
| 승리   | 0.6806221008300781 |
| 제자들 | 0.6795159578323364 |
| 분명   | 0.6775883436203003 |
| 복음   | 0.6616663932800293 |
| 깨닫   | 0.6593103408813477 |
| 변화   | 0.6535580158233643 |
| 통하   | 0.6533569097518921 |
| 사건   | 0.6463179588317871 |
| 부활   | 0.6418204903602600 |
| 최고   | 0.6403045058250427 |
|--------+--------------------|

유사도가 0.5~0.6으로 상대적으로 낮음.


** 단어 클러스터

[[./assets/buksuwon_dendrogram.png]]

[[./assets/pyeongan_dendrogram.png]]
